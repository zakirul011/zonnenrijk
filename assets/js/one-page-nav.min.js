!function($,b,c,d){var a=function(a,d){this.elem=a,this.$elem=$(a),this.options=d,this.metadata=this.$elem.data("plugin-options"),this.$win=$(b),this.sections={},this.didScroll=!1,this.$doc=$(c),this.docHeight=this.$doc.height()};a.prototype={defaults:{navItems:"a",currentClass:"current",changeHash:!1,easing:"swing",filter:"",scrollSpeed:750,scrollThreshold:.5,begin:!1,end:!1,scrollChange:!1},init:function(){return this.config=$.extend({},this.defaults,this.options,this.metadata),this.$nav=this.$elem.find(this.config.navItems),""!==this.config.filter&&(this.$nav=this.$nav.filter(this.config.filter)),this.$nav.on("click.onePageNav",$.proxy(this.handleClick,this)),this.getPositions(),this.bindInterval(),this.$win.on("resize.onePageNav",$.proxy(this.getPositions,this)),this},adjustNav:function(a,b){a.$elem.find("."+a.config.currentClass).removeClass(a.config.currentClass),b.addClass(a.config.currentClass)},bindInterval:function(){var b,a=this;a.$win.on("scroll.onePageNav",function(){a.didScroll=!0}),a.t=setInterval(function(){b=a.$doc.height(),a.didScroll&&(a.didScroll=!1,a.scrollChange()),b!==a.docHeight&&(a.docHeight=b,a.getPositions())},250)},getHash:function(a){return a.attr("href").split("#")[1]},getPositions:function(){var b,c,d,a=this;a.$nav.each(function(){b=a.getHash($(this)),d=$("#"+b),d.length&&(c=d.offset().top,a.sections[b]=Math.round(c))})},getSection:function(c){var a=null,d=Math.round(this.$win.height()*this.config.scrollThreshold);for(var b in this.sections)this.sections[b]-d<c&&(a=b);return a},handleClick:function(c){var a=this,d=$(c.currentTarget),e=d.parent(),f="#"+a.getHash(d);e.hasClass(a.config.currentClass)||(a.config.begin&&a.config.begin(),a.adjustNav(a,e),a.unbindInterval(),a.scrollTo(f,function(){a.config.changeHash&&(b.location.hash=f),a.bindInterval(),a.config.end&&a.config.end()})),c.preventDefault()},scrollChange:function(){var a,c=this.$win.scrollTop(),b=this.getSection(c);null!==b&& !(a=this.$elem.find('a[href$="#'+b+'"]').parent()).hasClass(this.config.currentClass)&&(this.adjustNav(this,a),this.config.scrollChange&&this.config.scrollChange(a))},scrollTo:function(a,b){var c=$(a).offset().top;$("html, body").animate({scrollTop:c},this.config.scrollSpeed,this.config.easing,b)},unbindInterval:function(){clearInterval(this.t),this.$win.unbind("scroll.onePageNav")}},a.defaults=a.prototype.defaults,$.fn.onePageNav=function(b){return this.each(function(){new a(this,b).init()})}}(jQuery,window,document)